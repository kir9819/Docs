<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>tag: Express | Existend Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Existend Docs">
<meta property="og:url" content="https://kir9819.github.io/Docs/tags/Express/index.html">
<meta property="og:site_name" content="Existend Docs">
<meta property="og:locale" content="ru">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Existend Docs">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/Docs/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="/Docs/lib/fancybox/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/Docs/css/main.css">
  <script src="/Docs/lib/jquery/dist/jquery.min.js"></script>
  
  
  
  
</head>
<body>
  <div id="wrapper">
    <header id="header" class="clearfix">
	<a id="logo" href="/Docs/" title="Existend Docs">Existend Docs</a>
	
	<nav id="nav-menu" class="clearfix">
		<form id="search" method="post" action="./" role="search">
			<input id="search-input" type="text" name="s" class="inputbox" value="Поиск" onfocus="if (value =='Поиск'){value =''}" onblur="if (value ==''){value='Поиск'}">
		</form>
		<ul>
      
				
        <li><a class="main-nav-link" href="/Docs/">Домашняя страница</a></li>
      
				
        <li><a class="main-nav-link" href="/Docs/archives">Архивы</a></li>
      
		</ul>
	</nav>
</header>
    <section id="main" class="clearfix">
  <article class="post-detail">
    <h1 class="post-title"><a href="/Docs/">Инструкция по созданию серверного приложения на nodejs + express + mongodb</a></h1>
    <ul class="post-meta">
  <li><i class="fa fa-user"></i> Автор Kirill Aniskin</li>
  <li><i class="fa fa-calendar"></i> Дата февр. 9</li>
  <li><i class="fa fa-folder"></i> Категории
  
    <a class="article-category-link" href="/Docs/categories/EN/">EN</a>
  
  </li>
</ul>
    <div class="post-content">
      <h1 id="Instruction-for-creating-a-server-app-on-Nodejs-Express-and-MongoDB"><a href="#Instruction-for-creating-a-server-app-on-Nodejs-Express-and-MongoDB" class="headerlink" title="Instruction for creating a server app on Nodejs, Express and MongoDB"></a>Instruction for creating a server app on Nodejs, Express and MongoDB</h1><hr>
<p>Based on simple example of app in which we can create, read, update and delete simple text documents</p>
<h3 id="Component-installation"><a href="#Component-installation" class="headerlink" title="Component installation"></a>Component installation</h3><p>The official site of nodejs (<a href="https://nodejs.org/" target="_blank" rel="noopener">https://nodejs.org/</a>) has detailed installation instructions</p>
<p>For centos:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl —silent —location https://rpm.nodesource.com/setup_9.x | sudo bash -</span><br><span class="line">$ sudo yum -y install nodejs</span><br><span class="line">$ sudo yum install gcc-c++ make</span><br></pre></td></tr></table></figure>
<p>For Ubuntu:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sL https://deb.nodesource.com/setup_9.x | sudo -E bash -</span><br><span class="line">$ sudo apt-get install -y nodejs</span><br><span class="line">$ sudo apt-get install -y build-essential</span><br></pre></td></tr></table></figure></p>
<p>Organize a folder for the project and execute a command for project initialization in it:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br></pre></td></tr></table></figure></p>
<h4 id="Answer-the-following-questions"><a href="#Answer-the-following-questions" class="headerlink" title="Answer the following questions"></a>Answer the following questions</h4><ul>
<li>Project name</li>
<li>Project version</li>
<li>Description</li>
<li>Entry point</li>
<li>Testing team</li>
<li>Githhab’s repository</li>
<li>Project keywords</li>
<li>Author</li>
<li>License</li>
</ul>
<h5 id="Confirm-and-you’ll-see-file-package-json-describing-the-project"><a href="#Confirm-and-you’ll-see-file-package-json-describing-the-project" class="headerlink" title="Confirm and you’ll see file package.json, describing the project."></a>Confirm and you’ll see file package.json, describing the project.</h5><p>Now install the remaining components: Express and MongoDB (the latest version of the plugin does not work correctly with the database, so it’s better to install an earlier one):<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save express mongodb@2.2.16</span><br></pre></td></tr></table></figure></p>
<p>Also, for the convenience of handling url-encoded requests, install the body-parser:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save body-parser</span><br></pre></td></tr></table></figure></p>
<p>And for the convenience of development, it is better to install Nodemon, which will restart the server every time when any files change:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save-dev nodemon</span><br></pre></td></tr></table></figure></p>
<p>To attach Nodemon, you need to add the following to package.json:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"notable"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error^ no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"nodemon server.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"body-parser"</span>: <span class="string">"^1.18.2"</span>,</span><br><span class="line">    <span class="string">"express"</span>: <span class="string">"^4.16.2"</span>,</span><br><span class="line">    <span class="string">"mongodb"</span>: <span class="string">"^2.2.16"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"nodemon"</span>: <span class="string">"^1.14.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>To be able to test app install Postman(<a href="https://www.getpostman.com/" target="_blank" rel="noopener">https://www.getpostman.com/</a>), which will simulate requests </p>
<h3 id="Starting-the-server"><a href="#Starting-the-server" class="headerlink" title="Starting the server"></a>Starting the server</h3><p>Create file server.js in root directory, in which we write dependencies, specify the port and start listening:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express        = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> MongoClient    = <span class="built_in">require</span>(<span class="string">'mongodb'</span>).MongoClient;</span><br><span class="line"><span class="keyword">const</span> bodyParser     = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">const</span> app            = express();</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">8080</span>;</span><br><span class="line">app.listen(port, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'We are live on '</span> + port);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Run the server:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure></p>
<p>In the terminal you can now see the message “We are live on port 8080”</p>
<h3 id="Structure-of-project"><a href="#Structure-of-project" class="headerlink" title="Structure of project"></a>Structure of project</h3><p>For more convenient structuring of the project it is necessary to create an ‘app’ folder, in it we create the ‘routes’ folder, and in it - files ‘index.js’ and ‘note_routes.js’</p>
<p>So, the structure looks like this: in app/ routes - our route handlers, in the node_modules folder - the modules of our project, and server.js directly describes our server.</p>
<h3 id="Connecting-the-DB"><a href="#Connecting-the-DB" class="headerlink" title="Connecting the DB"></a>Connecting the DB</h3><p>Add the ‘config’ directory to the project root, create a ‘db.js’. file in it.<br>In the file db.js write the following:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  url : <span class="string">'mongodb://localhost:27017/&lt;yourDataBase&gt;'</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>In the file ‘server.js’ we add:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express        = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> MongoClient    = <span class="built_in">require</span>(<span class="string">'mongodb'</span>).MongoClient;</span><br><span class="line"><span class="keyword">const</span> bodyParser     = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">const</span> db = <span class="built_in">require</span>(‘./config/db’);</span><br><span class="line"><span class="keyword">const</span> app            = express();</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">8080</span>;</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">true</span> &#125;));</span><br><span class="line">MongoClient.connect(db.url, (err, database) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(err)</span><br><span class="line">  <span class="built_in">require</span>(‘./app/routes’)(app, database);</span><br><span class="line">  app.listen(port, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'We are live on '</span> + port);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="Creating-a-text-document"><a href="#Creating-a-text-document" class="headerlink" title="Creating a text document"></a>Creating a text document</h3><p>In app/routes/note_routes.js we write:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app, db</span>) </span>&#123; &#125;;</span><br></pre></td></tr></table></figure></p>
<p>In app/routes/index.js:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> noteRoutes = <span class="built_in">require</span>(<span class="string">'./note_routes'</span>);</span><br><span class="line"> <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app, db</span>) </span>&#123;</span><br><span class="line">  app.post(<span class="string">'/notes'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> note = &#123; <span class="attr">text</span>: req.body.body, <span class="attr">title</span>: req.body.title &#125;;</span><br><span class="line">    db.collection(<span class="string">'notes'</span>).insert(note, (err, result) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123; </span><br><span class="line">        res.send(&#123; <span class="string">'error'</span>: <span class="string">'An error has occurred'</span> &#125;); </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(result.ops[<span class="number">0</span>]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="Reading-a-text-document"><a href="#Reading-a-text-document" class="headerlink" title="Reading a text document"></a>Reading a text document</h3><p>By analogy with app.post, we write another method:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/notes/:id'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> id = req.params.id;</span><br><span class="line">    <span class="keyword">const</span> details = &#123; <span class="string">'_id'</span>: <span class="keyword">new</span> ObjectID(id) &#125;;</span><br><span class="line">    db.collection(<span class="string">'notes'</span>).findOne(details, (err, item) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        res.send(&#123;<span class="string">'error'</span>:<span class="string">'An error has occurred'</span>&#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(item);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="Deleting-of-text-document"><a href="#Deleting-of-text-document" class="headerlink" title="Deleting of text document"></a>Deleting of text document</h3><p>By analogy with app.post, we write another method:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.delete(<span class="string">'/notes/:id'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> id = req.params.id;</span><br><span class="line">    <span class="keyword">const</span> details = &#123; <span class="string">'_id'</span>: <span class="keyword">new</span> ObjectID(id) &#125;;</span><br><span class="line">    db.collection(<span class="string">'notes'</span>).remove(details, (err, item) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        res.send(&#123;<span class="string">'error'</span>:<span class="string">'An error has occurred'</span>&#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(<span class="string">'Note '</span> + id + <span class="string">' deleted!'</span>);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="Updating-of-text-document"><a href="#Updating-of-text-document" class="headerlink" title="Updating of text document"></a>Updating of text document</h3><p>By analogy with app.post, we write another method:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.put (<span class="string">'/notes/:id'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> id = req.params.id;</span><br><span class="line">    <span class="keyword">const</span> details = &#123; <span class="string">'_id'</span>: <span class="keyword">new</span> ObjectID(id) &#125;;</span><br><span class="line">    <span class="keyword">const</span> note = &#123; <span class="attr">text</span>: req.body.body, <span class="attr">title</span>: req.body.title &#125;;</span><br><span class="line">    db.collection(<span class="string">'notes'</span>).update(details, note, (err, result) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          res.send(&#123;<span class="string">'error'</span>:<span class="string">'An error has occurred'</span>&#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          res.send(note);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="Testing-with-Postman"><a href="#Testing-with-Postman" class="headerlink" title="Testing with Postman"></a>Testing with Postman</h3><p>Postman allows specify the type of request (get, post, put, update), it’s address and port and add various parameters to the request body, for example, an empty POST request on the 8080 port.<br>Upon execution of the request, we see the server response.</p>
<p><img src="https://image.ibb.co/dHTQMH/1.png" alt="alt-текст"><br>Example of a POST request with a filled body:</p>
<p><img src="https://image.ibb.co/icVGTx/2.png" alt="alt-текст"><br>Let the server print the request to the server console, then we’ll see:</p>
<p><img src="https://image.ibb.co/n4YQMH/3.png" alt="alt-текст"></p>
<h3 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h3><p>Node installing<br><a href="https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora" target="_blank" rel="noopener">https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora</a><br>Postman installing<br><a href="https://www.getpostman.com/" target="_blank" rel="noopener">https://www.getpostman.com/</a><br>Similar articles</p>
<ol>
<li><a href="https://medium.freecodecamp.com/building-a-simple-node-js-api-in-under-30-minutes-a07ea9e390d2#.eybmlr1g9" target="_blank" rel="noopener">https://medium.freecodecamp.com/building-a-simple-node-js-api-in-under-30-minutes-a07ea9e390d2#.eybmlr1g9</a></li>
<li><a href="https://habrahabr.ru/company/ruvds/blog/321104/" target="_blank" rel="noopener">https://habrahabr.ru/company/ruvds/blog/321104/</a> </li>
<li><a href="https://loftblog.ru/material/4-podklyuchenie-bazy-dannyx-k-express/" target="_blank" rel="noopener">https://loftblog.ru/material/4-podklyuchenie-bazy-dannyx-k-express/</a></li>
<li><a href="http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/" target="_blank" rel="noopener">http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/</a></li>
</ol>

    </div>
  </article>

  <article class="post-detail">
    <h1 class="post-title"><a href="/Docs/">Инструкция по созданию серверного приложения на nodejs + express</a></h1>
    <ul class="post-meta">
  <li><i class="fa fa-user"></i> Автор Kirill Aniskin</li>
  <li><i class="fa fa-calendar"></i> Дата февр. 9</li>
  <li><i class="fa fa-folder"></i> Категории
  
    <a class="article-category-link" href="/Docs/categories/EN/">EN</a>
  
  </li>
</ul>
    <div class="post-content">
      <h1 id="Instructions-for-creating-a-server-application-on-nodejs-express"><a href="#Instructions-for-creating-a-server-application-on-nodejs-express" class="headerlink" title="Instructions for creating a server application on nodejs + express"></a>Instructions for creating a server application on nodejs + express</h1><h5 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h5><p>If you don’t have knowledge of JavaScript, you need to do something about it. For example, read the online tutorial: <a href="https://learn.javascript.ru/" target="_blank" rel="noopener">https://learn.javascript.ru/</a></p>
<h3 id="Node-js-what-is-it"><a href="#Node-js-what-is-it" class="headerlink" title="Node.js what is it?"></a>Node.js what is it?</h3><p><code>Node.js</code> is a JavaScript runtime built on Chrome’s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model that makes it light and efficient. Node.js’ package ecosystem, <code>npm</code>, is the largest ecosystem of open source libraries in the world.</p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>Go to the official site <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a> to download it. On the main page we see two possible options for download: the latest version of NodeJS and the LTS version.</p>
<p>Download, install. There you can find instructions for setting up:</p>
<p><strong>centos:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl —silent —location https://rpm.nodesource.com/setup_9.x | sudo bash - </span><br><span class="line">sudo yum -y install nodejs </span><br><span class="line">sudo yum install gcc-c++ make</span><br></pre></td></tr></table></figure></p>
<p><strong>ubuntu:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_9.x | sudo -E bash - </span><br><span class="line">sudo apt-get install -y nodejs </span><br><span class="line">sudo apt-get install -y build-essential</span><br></pre></td></tr></table></figure></p>
<p>You can verify the installation by:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node --version</span><br></pre></td></tr></table></figure></p>
<p>The command will show the current version of the program.</p>
<h3 id="REPL"><a href="#REPL" class="headerlink" title="REPL"></a>REPL</h3><p>After installing NodeJS, we get a tool like <code>REPL</code> available to us. REPL (Read Event Printed Loop) represents the ability to run expressions in the JavaScript language on the command line or terminal.</p>
<p>So, run the command line (on Windows) or the terminal (on OS X or Linux) and enter the <code>node</code> command. After entering this command, we can execute various expressions in JavaScript.</p>
<h3 id="Packages-in-Node-js"><a href="#Packages-in-Node-js" class="headerlink" title="Packages in Node.js"></a>Packages in Node.js</h3><p>In short, a package in Node.js is one or more JavaScript files that represent a library or tool.</p>
<p><code>npm</code> (node manager) is a standard package manager that automatically installs with Node.js. It is used to download packages from the npm cloud server, or to download packages to these servers.</p>
<h3 id="Now-where-to-begin"><a href="#Now-where-to-begin" class="headerlink" title="Now, where to begin?"></a>Now, where to begin?</h3><p>Create a project directory. Then open the terminal, and execute the command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>After answering the questions the file ‘package.json’ will be in the project directory</p>
<h3 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h3><p><code>Express</code> is a minimalistic and flexible web framework for Node.js applications built on the connect framework.</p>
<p>Main purpose is routing and intermediate processing with minimal own functionality: Express application, in fact, is a series of operations of intermediate processing functions (middleware).</p>
<p>To set up the Express in the terminal from the project directory, execute the command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express</span><br></pre></td></tr></table></figure></p>
<h3 id="How-to-apply-this"><a href="#How-to-apply-this" class="headerlink" title="How to apply this"></a>How to apply this</h3><p>Create a file <code>server.js</code>.</p>
<p>To use the Express framework, you need to connect the <code>express</code> module, and create the application.<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;); </span><br><span class="line">var app = express();</span><br></pre></td></tr></table></figure></p>
<p>Run the application using the command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.listen(8080, function()&#123;</span><br><span class="line">    console.log(&apos;server start on port 8080&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>As a result, the server will start, but if you execute a query to application <code>localhost: 8080</code>, you get the error:<br><code>`Cannot GET /`</code><br>This is because there is no route in the program.</p>
<h3 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h3><p>Routing determines how the application responds to a client request to a specific address, and to a specific HTTP request method.</p>
<p>Each route can have several handlers.</p>
<p>the following structure used to determine the route:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.METHOD(path, handler)</span><br></pre></td></tr></table></figure></p>
<p><code>app</code> - the instance of the express application<br><code>METHOD</code> - HTTP request method<br><code>path</code> - the path to the server<br><code>handler</code> - the function-handler</p>
<h3 id="We-continue-to-apply"><a href="#We-continue-to-apply" class="headerlink" title="We continue to apply"></a>We continue to apply</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">// We call the get method, it will set up a handler that will respond to get requests, for the route &apos;/&apos;</span><br><span class="line">app.get(&apos;/&apos;, function(request, response)&#123;</span><br><span class="line">    console.log(request.url);</span><br><span class="line">    response.send(&apos;&lt;h1&gt;Hello, world!&lt;/h1&gt;&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Same for the &apos;/ about&apos; route</span><br><span class="line">app.get(&apos;/about&apos;, function(request, response)&#123;</span><br><span class="line">    console.log(request.url);</span><br><span class="line">    response.send(&apos;&lt;h1&gt;About Page&lt;/h1&gt;&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(8080);</span><br></pre></td></tr></table></figure>
<h3 id="What-else"><a href="#What-else" class="headerlink" title="What else?"></a>What else?</h3><h5 id="Middleware-function"><a href="#Middleware-function" class="headerlink" title="Middleware-function"></a>Middleware-function</h5><p><code>Middleware-functions</code> are functions that have access to the request object <code>req</code>, the response object <code>res</code>, and to the next intermediate processing function in the “request-response” loop of the application <code>next</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">app.use(&apos;/&apos;, function(request, response, next)&#123;</span><br><span class="line">    console.log(&apos;Prehandler...&apos;);</span><br><span class="line">    // pass control to the next handler</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&apos;/&apos;, function(request, response)&#123;</span><br><span class="line">    console.log(&apos;Main handler&apos;);</span><br><span class="line">    // complete the response from the server</span><br><span class="line">    response.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>Thus, both functions are executed when accessing the root path.</p>
<h5 id="Routing-1"><a href="#Routing-1" class="headerlink" title="Routing"></a>Routing</h5><p>Using the <code>express.Router</code> class, you can create modular, mounted route handlers. An instance of this class represents a complex system of intermediate handlers and routing.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">var router = express.Router();</span><br><span class="line"></span><br><span class="line">router.route(&quot;/&quot;)</span><br><span class="line">            .get(function(req, res)&#123;     </span><br><span class="line">                res.send(&quot;List of products. Get method.&quot;);</span><br><span class="line">            &#125;)</span><br><span class="line">            .post(function(req, res)&#123;</span><br><span class="line">                res.send(&quot;Product created. POST method.&quot;);</span><br><span class="line">            &#125;);</span><br><span class="line">router.route(&quot;/:id&quot;)</span><br><span class="line">            .get(function(req, res)&#123;</span><br><span class="line">     </span><br><span class="line">                res.send(`Product $&#123;req.params.id&#125;`);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">app.use(&quot;/products&quot;, router);</span><br><span class="line"> </span><br><span class="line">app.get(&quot;/&quot;, function(req, res)&#123;     </span><br><span class="line">    res.send(&quot;Main page&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">app.listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>When executing the <code>localhost:8080/products</code> query, the route will be determined from the <code>router</code>. The corresponding handler function will be executed.</p>
<h3 id="Finish"><a href="#Finish" class="headerlink" title="Finish"></a>Finish</h3><p>In the manual, you learned about <code>node.js+express</code>. This will be enough for a quick start.<br>For more information refer to sources.</p>
<h3 id="Sources"><a href="#Sources" class="headerlink" title="Sources:"></a>Sources:</h3><p>node:<br><a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a><br><a href="https://itvdn.com/ru/video/node_js/express" target="_blank" rel="noopener">https://itvdn.com/ru/video/node_js/express</a> - not free resource unfortunately, but useful.<br><a href="https://learn.javascript.ru/screencast/nodejs" target="_blank" rel="noopener">https://learn.javascript.ru/screencast/nodejs</a> - alternative</p>
<p>npm:<br><a href="https://www.npmjs.com/" target="_blank" rel="noopener">https://www.npmjs.com/</a></p>
<p>express:<br><a href="http://expressjs.com/ru/" target="_blank" rel="noopener">http://expressjs.com/ru/</a><br><a href="https://nodeguide.ru/doc/modules-you-should-know/express/" target="_blank" rel="noopener">https://nodeguide.ru/doc/modules-you-should-know/express/</a><br><a href="http://expressjs.com/ru/4x/api.html" target="_blank" rel="noopener">http://expressjs.com/ru/4x/api.html</a> - express api directory </p>

    </div>
  </article>

  <article class="post-detail">
    <h1 class="post-title"><a href="/Docs/">Инструкция по созданию серверного приложения на nodejs + express + postgresql</a></h1>
    <ul class="post-meta">
  <li><i class="fa fa-user"></i> Автор Kirill Aniskin</li>
  <li><i class="fa fa-calendar"></i> Дата февр. 9</li>
  <li><i class="fa fa-folder"></i> Категории
  
    <a class="article-category-link" href="/Docs/categories/EN/">EN</a>
  
  </li>
</ul>
    <div class="post-content">
      <h1 id="Creating-simple-aplication-using-Node-js-Express-and-PostgreSQL"><a href="#Creating-simple-aplication-using-Node-js-Express-and-PostgreSQL" class="headerlink" title="Creating simple aplication using Node.js, Express and PostgreSQL."></a>Creating simple aplication using Node.js, Express and PostgreSQL.</h1><h3 id="Installation-Node-js"><a href="#Installation-Node-js" class="headerlink" title="Installation Node.js"></a>Installation Node.js</h3><p><strong>Windows:</strong></p>
<p>In order to start, go to the download page Node.js (<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a>). Select the installer that you want to download and install.</p>
<p>After we run the installer and complete the installation step-by-step.</p>
<p><strong>CentOS:</strong></p>
<p>To install Node.js, you need to connect to the server using the SSH protocol. After that, you need to install the latest version of .nodejs from the repositories. For this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ yum update</span><br><span class="line"></span><br><span class="line">// Install the Development Tools group</span><br><span class="line">$ yum -y groupinstall &quot;Development Tools&quot;</span><br><span class="line"></span><br><span class="line">// Enter the command to connect to the server and create several concurrent sessions</span><br><span class="line">$ yum -y install screen</span><br><span class="line"></span><br><span class="line">// Go to /usr/src and load the archive with Node.js</span><br><span class="line">$ cd / usr / src</span><br><span class="line">$ wget http://nodejs.org/dist/v0.10.4/node-v0.10.4.tar.gz</span><br><span class="line"></span><br><span class="line">// Extract the files from the archive and put them in the directory</span><br><span class="line">$ tar zxf node-v0.10.4.tar.gz</span><br><span class="line">$ cd node-v0.10.4</span><br><span class="line"></span><br><span class="line">// Create the installation file and run it</span><br><span class="line">$ make</span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure>
<p>Node.js is installed. By default, its binary code is in /usr/local/bin/node.</p>
<p><strong>Ubuntu</strong></p>
<p>To install Node and npm via apt-get, run these commands:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update  </span><br><span class="line">sudo apt-get install nodejs  </span><br><span class="line">sudo ln -s /usr/bin/nodejs /usr/bin/node  </span><br><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure>
<p>If you still want to use apt-get, but need a much newer version of Node, you should use this method.</p>
<p>This is very similar to the last one I showed you, but instead we’ll be running a script (maintained and distributed by NodeSource) to show the package manager where to get the latest version.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -  </span><br><span class="line">sudo apt-get install -y nodejs  </span><br><span class="line">sudo ln -s /usr/bin/nodejs /usr/bin/node </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">To verify that you have *Node.js* installed and check the version, run:</span><br></pre></td></tr></table></figure>
<p>$ node –version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">To start, run:</span><br></pre></td></tr></table></figure>
<p>$ node<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">### Setting dependencies.</span><br><span class="line"></span><br><span class="line">You can interactively generate the * package.json * file with the * npm init * command in the terminal.</span><br></pre></td></tr></table></figure></p>
<p>$ npm init</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">After running the command you will be asked to enter some data. After you receive them * package.json * will be automatically generated and placed in the folder of your application.</span><br><span class="line"></span><br><span class="line">If any dependencies are not installed, you can add them to your application with the following command:</span><br></pre></td></tr></table></figure>
<p>npm install[module name] –save</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">### PostgreSQL installing.</span><br><span class="line"></span><br><span class="line">PostgreSQL is a very popular database server, so it is present in official Ubuntu repositories. </span><br><span class="line"></span><br><span class="line">**Windows**</span><br><span class="line"></span><br><span class="line">You can download PostgreSQL from the official site download page here - http://www.postgresql.org/download/windows/</span><br><span class="line"></span><br><span class="line">Download the installer by selecting a version suitable for the system capacity and following the steps offered by the installer.</span><br><span class="line"></span><br><span class="line">**CentOS**</span><br><span class="line"></span><br><span class="line">To install the latest version, add the official repository with the following command:</span><br></pre></td></tr></table></figure>
<p>$  sudo rpm -Uvh <a href="http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-2.noarch.rpm" target="_blank" rel="noopener">http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-2.noarch.rpm</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">After the repository is added to your system, you can proceed to install the program.</span><br><span class="line">The installation of Postgresql CentOS is performed by the command:</span><br></pre></td></tr></table></figure>
<p> $ sudo yum install postgresql96-server postgresql96</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Immediately after installing Postgresql, the server is not yet ready for use, you need to initialize the necessary databases. To do this, execute:</span><br></pre></td></tr></table></figure>
<p> $  /usr/pgsql-9.6/bin/postgresql96-setup initdb<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">**Ubuntu**</span><br><span class="line"></span><br><span class="line">However, in PPA developers PostgreSQL you can find the latest version.</span><br><span class="line"></span><br><span class="line">Add the PostgreSQL repository to the system source list:</span><br></pre></td></tr></table></figure></p>
<p>$ sudo sh -c ‘echo “deb <a href="http://apt.postgresql.org/pub/repos/apt/" target="_blank" rel="noopener">http://apt.postgresql.org/pub/repos/apt/</a> <code>lsb_release -cs</code>-pgdg main” &gt;&gt; /etc/apt/sources.list.d/pgdg.list’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">and a key:</span><br></pre></td></tr></table></figure>
<p>$ wget -q <a href="https://www.postgresql.org/media/keys/ACCC4CF8.asc" target="_blank" rel="noopener">https://www.postgresql.org/media/keys/ACCC4CF8.asc</a> -O - | sudo apt-key add -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">This will allow you to receive the most recent versions when upgrading packages.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>initdb -U postgres -D data<br>pg_ctl -D data start<br>psql -U postgres<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Here *postgres* is the user name, it&apos;s better to specify it by default, for starters, and *data* is the directory where databases will be stored, you can specify any convenient.</span><br><span class="line">After that *pg_ctl* starts PostgreSQL (indicating the directory with the databases).</span><br><span class="line"></span><br><span class="line">At the end, we should see a welcome console:</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>postgres=#<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Express installing.</span><br><span class="line"></span><br><span class="line">To install Express and add it to the dependency list, you must go to the project folder and run the command:</span><br></pre></td></tr></table></figure></p>
<p>$ npm install express –save</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Creating a simple server application.</span><br><span class="line"></span><br><span class="line">Create the directory where your project will be stored.</span><br></pre></td></tr></table></figure>
<p>$ mkdir nodejs-express-postgresql/<br>$ cd nodejs-express-postgresql/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Now we need to initialize our application:</span><br></pre></td></tr></table></figure>
<p>$ npm init -y</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">This command will create * package.json * with standard configuration settings.</span><br><span class="line"></span><br><span class="line">Now create a file with our application.</span><br></pre></td></tr></table></figure>
<p>$ touch app.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Now you need to connect and configure Express.</span><br></pre></td></tr></table></figure>
<p>const express = require(‘express’);<br>const bodyParser = require(‘body-parser’);</p>
<p>// Set up the express app<br>const app = express();</p>
<p>// Setup a default catch-all route that sends back a welcome message in JSON format.<br>app.get(‘*’, (req, res) =&gt; res.status(200).send({<br>  message: ‘Welcome, my frined.’,<br>}));</p>
<p>module.exports = app;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Now if we run our server</span><br></pre></td></tr></table></figure>
<p>npm run start:dev</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">And go to http://localhost:8000/, then we will see the message *Welcome, my friend.*</span><br><span class="line"></span><br><span class="line">Now you need to connect our database.</span><br><span class="line">We will immediately use the pool, not separate connections. This is a common practice, especially for PostgreSQL. The pool allows you to store multiple connections, thus not wasting time creating them and not dealing with their management.</span><br><span class="line"></span><br><span class="line">First, configure the dependency, then add the connection to our database.</span><br></pre></td></tr></table></figure>
<p>const  Pool  = require(‘pg’).Pool;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">By default, *PostgreSQL* does not have a password, and the standard port is 5432.</span><br></pre></td></tr></table></figure>
<p>const config = {<br>    user: ‘postgres’,<br>    host: ‘localhost’,<br>    database: ‘users’,<br>    password: ‘’, </p>
<p>  };</p>
<p>  const pool = new Pool(config);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Now it only remains to make our function, which will show all entries from the table *users*.</span><br></pre></td></tr></table></figure>
<p>(async () =&gt; {<br>    const client = await pool.connect()<br>    try {<br>      const res = await pool.query(“select * from users”);<br>      console.log(res.rows[0])<br>    } finally {<br>      client.release()<br>    }<br>  })().catch(e =&gt; console.log(e.stack))</p>
<p>  ```</p>
<p>Now when you reboot our server you can see the result.</p>
<h3 id="Materials-and-useful-links-that-are-used-in-the-work"><a href="#Materials-and-useful-links-that-are-used-in-the-work" class="headerlink" title="Materials and useful links that are used in the work."></a>Materials and useful links that are used in the work.</h3><p><strong>PostgreSQL:</strong><br>    <a href="https://node-postgres.com/" target="_blank" rel="noopener">https://node-postgres.com/</a><br>    <a href="http://expressjs.com/ru/guide/database-integration.html" target="_blank" rel="noopener">http://expressjs.com/ru/guide/database-integration.html</a></p>
<p><strong>Node.js:</strong><br>    <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a><br>    <a href="https://medium.com/devschacht/node-hero-chapter-1-239f7afeb1d1" target="_blank" rel="noopener">https://medium.com/devschacht/node-hero-chapter-1-239f7afeb1d1</a><br>    <a href="https://node-postgres.com/features/pooling" target="_blank" rel="noopener">https://node-postgres.com/features/pooling</a></p>
<p><strong>Express:</strong><br>    <a href="http://expressjs.com/ru/" target="_blank" rel="noopener">http://expressjs.com/ru/</a></p>
<p><strong>NPM:</strong><br>    <a href="https://www.npmjs.com/" target="_blank" rel="noopener">https://www.npmjs.com/</a></p>

    </div>
  </article>

  <article class="post-detail">
    <h1 class="post-title"><a href="/Docs/">Инструкция по созданию серверного приложения на nodejs + express + postgresql</a></h1>
    <ul class="post-meta">
  <li><i class="fa fa-user"></i> Автор Kirill Aniskin</li>
  <li><i class="fa fa-calendar"></i> Дата февр. 9</li>
  <li><i class="fa fa-folder"></i> Категории
  
    <a class="article-category-link" href="/Docs/categories/RU/">RU</a>
  
  </li>
</ul>
    <div class="post-content">
      <h1 id="Создание-простого-серверного-приложения-с-использованием-Node-js-Express-and-PostgreSQL"><a href="#Создание-простого-серверного-приложения-с-использованием-Node-js-Express-and-PostgreSQL" class="headerlink" title="Создание простого серверного приложения с использованием Node.js, Express and PostgreSQL."></a>Создание простого серверного приложения с использованием Node.js, Express and PostgreSQL.</h1><h3 id="Установка-Node-js"><a href="#Установка-Node-js" class="headerlink" title="Установка Node.js"></a>Установка Node.js</h3><p><strong>Windows:</strong></p>
<p>Для того чтобы начать, зайдите на страницу загрузки Node.js (<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a>). Выберите установщик, который вы хотите скачать и установить.</p>
<p>После запускаем установщик и пошагово завершаем установку.</p>
<p><strong>CentOS:</strong></p>
<p>Для установки Node.js нужно подключиться к серверу по протоколу SSH. После этого, нужно установить последнюю версию .nodejs из репозиториев. Для этого:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ yum update</span><br><span class="line"></span><br><span class="line">//Устанавливаем группу Development Tools</span><br><span class="line">$yum -y groupinstall &quot;Development Tools&quot;</span><br><span class="line"></span><br><span class="line">//Вводим команду для подключения к серверу и создания нескольких параллельных сессий</span><br><span class="line">$ yum -y install screen</span><br><span class="line"></span><br><span class="line">//Переходим в папку /usr/src и загружаем архив с Node.js</span><br><span class="line">$ cd /usr/src</span><br><span class="line">$ wget http://nodejs.org/dist/v0.10.4/node-v0.10.4.tar.gz</span><br><span class="line"></span><br><span class="line">//Извлекаем файлы из архива и помещаем в каталог</span><br><span class="line">$ tar zxf node-v0.10.4.tar.gz</span><br><span class="line">$ cd node-v0.10.4</span><br><span class="line"></span><br><span class="line">//Cоздаем установочный файл и запускаем</span><br><span class="line">$ make </span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure>
<p>Node.js установлен. По умолчанию его двоичный код лежит в /usr/local/bin/node.</p>
<p><strong>Ubuntu</strong></p>
<p>Для установки <em>Node</em> и <em>npm</em> при помощи <em>apt-get</em>, запустите следующие команды:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update  </span><br><span class="line">$ sudo apt-get install nodejs  </span><br><span class="line">$ sudo ln -s /usr/bin/nodejs /usr/bin/node  </span><br><span class="line">$ sudo apt-get install npm</span><br></pre></td></tr></table></figure>
<p>Если вы все еще хотите использовать <em>apt-get</em>, но вам необходима наиболее свежая версия <em>Node</em>, стоит воспользоваться иным методом.</p>
<p>Он очень похож на предыдущий, но мы будем запускать скрипт, указывающий менеджеру пакетов, где хранится последняя версия.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ curl -sL https://deb.nodesource.com/setup_5.x | sudo -E bash -  </span><br><span class="line">$ sudo apt-get install -y nodejs  </span><br><span class="line">$ sudo ln -s /usr/bin/nodejs /usr/bin/node </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">Чтобы проверить, что у вас установлена Node.js и проверить версию, выполните:</span><br></pre></td></tr></table></figure>
<p>$ node –version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Чтобы начать работу, выполните в командной строке:</span><br></pre></td></tr></table></figure>
<p>$ node<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Установка зависимостей.</span><br><span class="line"></span><br><span class="line">Вы можете интерактивно генерировать файл *package.json* с помощью команды *npm init* в терминале.</span><br></pre></td></tr></table></figure></p>
<p>$ npm init</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">После запуска команды вас попросят ввести некоторые данные. После их получения *package.json* будет автоматически сгенерирован и помещен в папку вашего приложения.</span><br><span class="line"></span><br><span class="line">Если какие-либо зависимости не установлены, то добавить их в своё приложение можно следующей командой:</span><br></pre></td></tr></table></figure>
<p>npm install[module name] –save</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">### Установка PostgreSQL.</span><br><span class="line"></span><br><span class="line">PostgreSQL является очень популярным сервером баз данных, поэтому присутствует в официальных репозиториях Ubuntu. Однако в PPA разработчиков PostgreSQL можно найти самую свежую версию. </span><br><span class="line"></span><br><span class="line">**Windows**</span><br><span class="line"></span><br><span class="line">Скачать PostgreSQL можно со страницы загрузки официального сайта вот здесь - http://www.postgresql.org/download/windows/</span><br><span class="line"></span><br><span class="line">Загрузить установщик, выбрав версию, подходящую под разрядность системы и следовать шагам, предлагаемым установщиком.</span><br><span class="line"></span><br><span class="line">**CentOS**</span><br><span class="line"></span><br><span class="line">Для установки самой свежей версии необходимо добавить официальный репозиторий следующей командой:</span><br></pre></td></tr></table></figure>
<p>$  sudo rpm -Uvh <a href="http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-2.noarch.rpm" target="_blank" rel="noopener">http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-2.noarch.rpm</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">После того как репозиторий будет добавлен к вашей системе вы можете перейти к установке программы. </span><br><span class="line">Установка Postgresql CentOS выполняется командой:</span><br></pre></td></tr></table></figure>
<p> $ sudo yum install postgresql96-server postgresql96</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Сразу после установки Postgresql сервер еще не готов к использованию, нужно инициализировать необходимые базы данных. Для этого выполните:</span><br></pre></td></tr></table></figure>
<p> $  /usr/pgsql-9.6/bin/postgresql96-setup initdb<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**Ubuntu:**</span><br><span class="line"></span><br><span class="line">Добавьте репозиторий PostgreSQL в системный список источников:</span><br></pre></td></tr></table></figure></p>
<p>$ sudo sh -c ‘echo “deb <a href="http://apt.postgresql.org/pub/repos/apt/" target="_blank" rel="noopener">http://apt.postgresql.org/pub/repos/apt/</a> <code>lsb_release -cs</code>-pgdg main” &gt;&gt; /etc/apt/sources.list.d/pgdg.list’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">и добавьте для него ключ:</span><br></pre></td></tr></table></figure>
<p>$ wget -q <a href="https://www.postgresql.org/media/keys/ACCC4CF8.asc" target="_blank" rel="noopener">https://www.postgresql.org/media/keys/ACCC4CF8.asc</a> -O - | sudo apt-key add -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Это позволит при обновлении пакетов получать наиболее свежие версии.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>initdb -U postgres -D data<br>pg_ctl -D data start<br>psql -U postgres<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Здесь *postgres* - это имя пользователя, лучше его указать по умолчанию, для начала, а *data* - директория, где будут храниться базы, можно указать любую удобную.  </span><br><span class="line">После чего *pg_ctl* запускает PostgreSQL (с указанием директории с базами).</span><br><span class="line"></span><br><span class="line">По окончанию, мы должны увидеть приветственную консоль:</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>postgres=#<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Установка Express.</span><br><span class="line"></span><br><span class="line">Чтобы установить Express и добавить в список зависимостей, необходимо перейти в папку с проектом и оттуда запустить команду:</span><br></pre></td></tr></table></figure></p>
<p>$ npm install express –save</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Создание простого серверного приложения.</span><br><span class="line"></span><br><span class="line">Создайте директорию, где будет храниться ваш проект.</span><br></pre></td></tr></table></figure>
<p>$ mkdir nodejs-express-postgresql/<br>$ cd nodejs-express-postgresql/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Теперь необходимо иниицировать наше приложение:</span><br></pre></td></tr></table></figure>
<p>$ npm init -y</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Эта команда создаст *package.json* со стандартными настройками конфигурации.</span><br><span class="line"></span><br><span class="line">Теперь создадим файл с нашим приложением.</span><br></pre></td></tr></table></figure>
<p>$ touch app.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Теперь набоходимо подключить и настроить Express.</span><br></pre></td></tr></table></figure>
<p>const express = require(‘express’);<br>const bodyParser = require(‘body-parser’);</p>
<p>// Set up the express app<br>const app = express();</p>
<p>// Setup a default catch-all route that sends back a welcome message in JSON format.<br>app.get(‘*’, (req, res) =&gt; res.status(200).send({<br>  message: ‘Welcome, my frined.’,<br>}));</p>
<p>module.exports = app;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Теперь если мы запустим наш сервер</span><br></pre></td></tr></table></figure>
<p>npm run start:dev</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">И перейдем по http://localhost:8000/, то у нас появится сообщение *Welcome, my friend.*</span><br><span class="line"></span><br><span class="line">Теперь необходимо подключить нашу базу данных.</span><br><span class="line">Мы будем сразу же использовать пул, а не отдельные подключения. Это распространенная практика, тем более для PostgreSQL. Пул позволяет хранить несколько соединений, тем самым не тратя время на их создание и не заниматься их менеджементом.</span><br><span class="line"></span><br><span class="line">Сперва настроим зависимость, потом добавим подключение к нашей базе.</span><br></pre></td></tr></table></figure>
<p>const  Pool  = require(‘pg’).Pool;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">По умолчанию в *PostgreSQL* нет пароля, а стандартным портом является - 5432.</span><br></pre></td></tr></table></figure>
<p>const config = {<br>    user: ‘postgres’,<br>    host: ‘localhost’,<br>    database: ‘users’,<br>    password: ‘’, </p>
<p>  };</p>
<p>  const pool = new Pool(config);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Теперь только остаётся сделать нашу функцию, которая будет показывать все записи из таблицы *users*.</span><br></pre></td></tr></table></figure>
<p>(async () =&gt; {<br>    const client = await pool.connect()<br>    try {<br>      const res = await pool.query(“select * from users”);<br>      console.log(res.rows[0])<br>    } finally {<br>      client.release()<br>    }<br>  })().catch(e =&gt; console.log(e.stack))</p>
<p>  ```</p>
<p>Теперь при перезагрузке нашего сервера можно будет увидеть результат.</p>
<h3 id="Материалы-и-полезные-ссылки-используемвые-в-работе"><a href="#Материалы-и-полезные-ссылки-используемвые-в-работе" class="headerlink" title="Материалы и полезные ссылки, используемвые в работе."></a>Материалы и полезные ссылки, используемвые в работе.</h3><p><strong>PostgreSQL:</strong><br>    <a href="https://node-postgres.com/" target="_blank" rel="noopener">https://node-postgres.com/</a><br>    <a href="http://expressjs.com/ru/guide/database-integration.html" target="_blank" rel="noopener">http://expressjs.com/ru/guide/database-integration.html</a></p>
<p><strong>Node.js:</strong><br>    <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a><br>    <a href="https://medium.com/devschacht/node-hero-chapter-1-239f7afeb1d1" target="_blank" rel="noopener">https://medium.com/devschacht/node-hero-chapter-1-239f7afeb1d1</a><br>    <a href="https://node-postgres.com/features/pooling" target="_blank" rel="noopener">https://node-postgres.com/features/pooling</a></p>
<p><strong>Express:</strong><br>    <a href="http://expressjs.com/ru/" target="_blank" rel="noopener">http://expressjs.com/ru/</a></p>
<p><strong>NPM:</strong><br>    <a href="https://www.npmjs.com/" target="_blank" rel="noopener">https://www.npmjs.com/</a></p>

    </div>
  </article>

  <article class="post-detail">
    <h1 class="post-title"><a href="/Docs/">Инструкция по созданию серверного приложения на nodejs + express</a></h1>
    <ul class="post-meta">
  <li><i class="fa fa-user"></i> Автор Kirill Aniskin</li>
  <li><i class="fa fa-calendar"></i> Дата февр. 9</li>
  <li><i class="fa fa-folder"></i> Категории
  
    <a class="article-category-link" href="/Docs/categories/RU/">RU</a>
  
  </li>
</ul>
    <div class="post-content">
      <h1 id="Инструкция-по-созданию-серверного-приложения-на-nodejs-express"><a href="#Инструкция-по-созданию-серверного-приложения-на-nodejs-express" class="headerlink" title="Инструкция по созданию серверного приложения на nodejs+express"></a>Инструкция по созданию серверного приложения на nodejs+express</h1><h5 id="До-того-как-начать"><a href="#До-того-как-начать" class="headerlink" title="До того, как начать"></a>До того, как начать</h5><p>Предполагается, что Вы уже знакомы с JavaScript. Если нет, то необходимо что-то сделать с этим. Например почитать онлайн учебник: <a href="https://learn.javascript.ru/" target="_blank" rel="noopener">https://learn.javascript.ru/</a></p>
<h3 id="Node-js-что-это"><a href="#Node-js-что-это" class="headerlink" title="Node.js что это?"></a>Node.js что это?</h3><p><code>Node.js</code> — это кроссплатформенная среда исполнения JavaScript с открытым исходным кодом, основанная на движке V8 компании Google и предназначенная для создания web-приложений на стороне сервера. </p>
<h3 id="Установка"><a href="#Установка" class="headerlink" title="Установка"></a>Установка</h3><p>Для загрузки нужно перейти на официальный сайт <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a>. На главной странице мы сразу увидим две возможные опции для загрузки: самая последняя версия NodeJS и LTS-версия.</p>
<p>Cкачиваем, устанавливаем. Там же можно найти инструкцию по утановке: </p>
<p><strong>centos:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl —silent —location https://rpm.nodesource.com/setup_9.x | sudo bash - </span><br><span class="line">sudo yum -y install nodejs </span><br><span class="line">sudo yum install gcc-c++ make</span><br></pre></td></tr></table></figure></p>
<p><strong>ubuntu:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_9.x | sudo -E bash - </span><br><span class="line">sudo apt-get install -y nodejs </span><br><span class="line">sudo apt-get install -y build-essential</span><br></pre></td></tr></table></figure></p>
<p>Проверить правильность установки можно командой:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node --version</span><br></pre></td></tr></table></figure></p>
<p>Команда покажет текущую версию программы.</p>
<h3 id="REPL"><a href="#REPL" class="headerlink" title="REPL"></a>REPL</h3><p>После установки NodeJS нам становится доступным такой инструмент как <code>REPL</code>.<br>REPL (Read Event Printed Loop) представляет возможность запуска выражений на языке JavaScript в командной строке или терминале.</p>
<p>Так, запустим командную строку (на Windows) или терминал (на OS X или Linux) и введем команду <code>node</code>. После ввода этой команды мы можем выполнять различные выражения на JavaScript.</p>
<h3 id="Пакеты-в-Node-js"><a href="#Пакеты-в-Node-js" class="headerlink" title="Пакеты в Node.js"></a>Пакеты в Node.js</h3><p>Вкратце, пакетом в Node.js называется один или несколько JavaScript-файлов, представляющих собой какую-то библиотеку или инструмент.</p>
<p><code>npm</code> (аббр. node package manager) — это стандартный менеджер пакетов, автоматически устанавливающийся вместе с Node.js. Он используется для скачивания пакетов из облачного сервера npm, либо для загрузки пакетов на эти сервера.</p>
<h3 id="Перед-стартом-проекта"><a href="#Перед-стартом-проекта" class="headerlink" title="Перед стартом проекта"></a>Перед стартом проекта</h3><p>Создайте директорию проекта, где будет храниться весь код. Затем откройте терминал, выполните команду для инициализации:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>После ответа на вопросы в директории проекта появится файл ‘package.json’ </p>
<h3 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h3><p><code>Express</code> - это минималистичный и гибкий веб-фреймворк для приложений Node.js,  построенный на базе фреймворка connect.  </p>
<p>Основное предназначение Express - маршрутизация и промежуточная обработка с минимальной собственной функциональностью: приложение Express, по сути, представляет собой серию вызовов функций промежуточной обработки (middleware). </p>
<p>Для утановки Express в терминале из директории проекта запустите команду:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express</span><br></pre></td></tr></table></figure></p>
<h3 id="Как-это-применить"><a href="#Как-это-применить" class="headerlink" title="Как это применить"></a>Как это применить</h3><p>Создаем файл <code>server.js</code>.</p>
<p>Для использования фреймворка Express, необходимо подключить модуль <code>express</code>, и создать приложение.<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;); </span><br><span class="line">var app = express();</span><br></pre></td></tr></table></figure></p>
<p>Запустить приложение можно командой:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.listen(8080, function()&#123;</span><br><span class="line">    console.log(&apos;server start on port 8080&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>В результате сервер запустится, но если в браузере выполнить запрос к приложению <code>localhost:8080</code>, то получим ошибку:</p>
<p><code>Cannot GET /</code></p>
<p>Это происходит потому, что в программе нет ни одного маршрута.</p>
<h3 id="Маршрутизация"><a href="#Маршрутизация" class="headerlink" title="Маршрутизация"></a>Маршрутизация</h3><p>Маршрутизация определяет, как приложение отвечает на клиентский запрос к конкретному адресу, и определенному методу HTTP запроса. </p>
<p>Каждый маршрут может иметь несколько обработчиков, которые выполняются при сопоставлении маршрута. </p>
<p>Для определения маршрута используют следующую структуру:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.METHOD(path, handler)</span><br></pre></td></tr></table></figure></p>
<p><code>app</code>  – экземпляр express приложения<br><code>METHOD</code> – метод HTTP запроса<br><code>path</code> – путь на сервере<br><code>handler</code>  – функция обработчик на указанный путь </p>
<h3 id="Продолжаем-применять"><a href="#Продолжаем-применять" class="headerlink" title="Продолжаем применять"></a>Продолжаем применять</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">// Вызываем метод get, он установит обработчик, который будет срабатывать на get запросы, для маршрута &apos;/&apos;</span><br><span class="line">app.get(&apos;/&apos;, function(request, response)&#123;</span><br><span class="line">    console.log(request.url);</span><br><span class="line">    response.send(&apos;&lt;h1&gt;Hello, world!&lt;/h1&gt;&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// То же самое для маршрута &apos;/about&apos;</span><br><span class="line">app.get(&apos;/about&apos;, function(request, response)&#123;</span><br><span class="line">    console.log(request.url);</span><br><span class="line">    response.send(&apos;&lt;h1&gt;About Page&lt;/h1&gt;&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(8080);</span><br></pre></td></tr></table></figure>
<h3 id="Что-еще"><a href="#Что-еще" class="headerlink" title="Что еще?"></a>Что еще?</h3><h5 id="Middleware-function"><a href="#Middleware-function" class="headerlink" title="Middleware-function"></a>Middleware-function</h5><p>Функции промежуточной обработки (<code>middleware</code>) - это функции, имеющие доступ к объекту запроса <code>req</code>, объекту ответа <code>res</code> и к следующей функции промежуточной обработки в цикле “запрос-ответ” приложения <code>next</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">// для регистрации middleware используется функция use, all, app.METHOD()</span><br><span class="line">    // 1. request - данные запроса</span><br><span class="line">    // 2. response - объект для управления ответом</span><br><span class="line">    // 3. next - следующая в конвейере обработки функция</span><br><span class="line"></span><br><span class="line">app.use(&apos;/&apos;, function(request, response, next)&#123;</span><br><span class="line">    console.log(&apos;Prehandler...&apos;);</span><br><span class="line">    // передаем управление следующему обработчику</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(&apos;/&apos;, function(request, response)&#123;</span><br><span class="line">    console.log(&apos;Main handler&apos;);</span><br><span class="line">    // завершаем ответ от сервера</span><br><span class="line">    response.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>Таким образом, выполнятся обе функции при обращении по корневому маршруту.</p>
<h5 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h5><p>Используя класс <code>express.Router</code> можно создавать модульные, монтируемые обработчики маршрутов. Экземпляр этого класса представляет комплексную систему промежуточных обработчиков и маршрутизации.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var app = express();</span><br><span class="line"></span><br><span class="line">var router = express.Router();</span><br><span class="line"></span><br><span class="line">router.route(&quot;/&quot;)</span><br><span class="line">            .get(function(req, res)&#123;     </span><br><span class="line">                res.send(&quot;List of products. Get method.&quot;);</span><br><span class="line">            &#125;)</span><br><span class="line">            .post(function(req, res)&#123;</span><br><span class="line">                res.send(&quot;Product created. POST method.&quot;);</span><br><span class="line">            &#125;);</span><br><span class="line">router.route(&quot;/:id&quot;)</span><br><span class="line">            .get(function(req, res)&#123;</span><br><span class="line">     </span><br><span class="line">                res.send(`Product $&#123;req.params.id&#125;`);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">app.use(&quot;/products&quot;, router);</span><br><span class="line"> </span><br><span class="line">app.get(&quot;/&quot;, function(req, res)&#123;     </span><br><span class="line">    res.send(&quot;Главная страница&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">app.listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>При выполении запроса <code>localhost:8080/products</code> маршрут будет определяться из <code>router</code>. Выполнится соответствующая функция-обработчик.</p>
<h3 id="Финиш"><a href="#Финиш" class="headerlink" title="Финиш"></a>Финиш</h3><p>В инструкции вы познакомились с <code>node.js+express</code>. Этого будет достаточно для быстрого старта.<br>Для получения большей информации листайте источники.</p>
<h3 id="Источники"><a href="#Источники" class="headerlink" title="Источники:"></a>Источники:</h3><p>node:<br><a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a><br><a href="https://itvdn.com/ru/video/node_js/express" target="_blank" rel="noopener">https://itvdn.com/ru/video/node_js/express</a> - платный ресурс к сожалению, но полезный.<br><a href="https://learn.javascript.ru/screencast/nodejs" target="_blank" rel="noopener">https://learn.javascript.ru/screencast/nodejs</a> - альтернатива</p>
<p>npm:<br><a href="https://www.npmjs.com/" target="_blank" rel="noopener">https://www.npmjs.com/</a></p>
<p>express:<br><a href="http://expressjs.com/ru/" target="_blank" rel="noopener">http://expressjs.com/ru/</a><br><a href="https://nodeguide.ru/doc/modules-you-should-know/express/" target="_blank" rel="noopener">https://nodeguide.ru/doc/modules-you-should-know/express/</a><br><a href="http://expressjs.com/ru/4x/api.html" target="_blank" rel="noopener">http://expressjs.com/ru/4x/api.html</a> - api справочник express </p>

    </div>
  </article>


</section>
    <footer id="footer" role="contentinfo">
    <div>&copy; 2018 <a href="/">Existend Docs</a>.
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Designed by <a href="http://rainylog.com" target="_blank">Rainy.</a>
	</div>
</footer><!-- end #footer -->

  </div>
  <script src="/Docs/lib/fancybox/dist/jquery.fancybox.min.js"></script>

  <script src="/Docs/js/helper.js"></script>
  <script src="/Docs/js/_third-party/gitment.js"></script>
</body>
</html>